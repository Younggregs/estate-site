Please specify --site sitename
Backup failed for Site library.test. Database or site_config.json may be corrupted
Traceback (most recent call last):
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/commands/site.py", line 441, in backup
    force=True
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/utils/backups.py", line 528, in scheduled_backup
    verbose=verbose,
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/utils/backups.py", line 565, in new_backup
    compress_files=compress,
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/utils/backups.py", line 85, in __init__
    self.setup_backup_tables()
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/utils/backups.py", line 119, in setup_backup_tables
    existing_tables = frappe.db.get_tables()
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/database/database.py", line 790, in get_tables
    """)
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/database/database.py", line 113, in sql
    self.connect()
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/database/database.py", line 65, in connect
    self._conn = self.get_connection()
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/database/mariadb/database.py", line 83, in get_connection
    local_infile=frappe.conf.local_infile
  File "/Users/greggy/thanos/frappe/frappe-bench/env/lib/python3.7/site-packages/pymysql/connections.py", line 353, in __init__
    self.connect()
  File "/Users/greggy/thanos/frappe/frappe-bench/env/lib/python3.7/site-packages/pymysql/connections.py", line 633, in connect
    self._request_authentication()
  File "/Users/greggy/thanos/frappe/frappe-bench/env/lib/python3.7/site-packages/pymysql/connections.py", line 907, in _request_authentication
    auth_packet = self._read_packet()
  File "/Users/greggy/thanos/frappe/frappe-bench/env/lib/python3.7/site-packages/pymysql/connections.py", line 725, in _read_packet
    packet.raise_for_error()
  File "/Users/greggy/thanos/frappe/frappe-bench/env/lib/python3.7/site-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/Users/greggy/thanos/frappe/frappe-bench/env/lib/python3.7/site-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1045, "Access denied for user '_ad03fa1a016ca1c4'@'localhost' (using password: YES)")

Backup failed for Site library.test. Database or site_config.json may be corrupted
Traceback (most recent call last):
  File "/Users/greggy/thanos/frappe/frappe-bench/env/lib/python3.7/site-packages/pymysql/connections.py", line 614, in connect
    (self.host, self.port), self.connect_timeout, **kwargs
  File "/usr/local/opt/python/Frameworks/Python.framework/Versions/3.7/lib/python3.7/socket.py", line 728, in create_connection
    raise err
  File "/usr/local/opt/python/Frameworks/Python.framework/Versions/3.7/lib/python3.7/socket.py", line 716, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 61] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/commands/site.py", line 441, in backup
    force=True
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/utils/backups.py", line 528, in scheduled_backup
    verbose=verbose,
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/utils/backups.py", line 565, in new_backup
    compress_files=compress,
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/utils/backups.py", line 85, in __init__
    self.setup_backup_tables()
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/utils/backups.py", line 119, in setup_backup_tables
    existing_tables = frappe.db.get_tables()
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/database/database.py", line 790, in get_tables
    """)
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/database/database.py", line 113, in sql
    self.connect()
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/database/database.py", line 65, in connect
    self._conn = self.get_connection()
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/database/mariadb/database.py", line 83, in get_connection
    local_infile=frappe.conf.local_infile
  File "/Users/greggy/thanos/frappe/frappe-bench/env/lib/python3.7/site-packages/pymysql/connections.py", line 353, in __init__
    self.connect()
  File "/Users/greggy/thanos/frappe/frappe-bench/env/lib/python3.7/site-packages/pymysql/connections.py", line 664, in connect
    raise exc
pymysql.err.OperationalError: (2003, "Can't connect to MySQL server on '127.0.0.1' ([Errno 61] Connection refused)")

Backup failed for Site library.test. Database or site_config.json may be corrupted
Traceback (most recent call last):
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/commands/site.py", line 441, in backup
    force=True
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/utils/backups.py", line 528, in scheduled_backup
    verbose=verbose,
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/utils/backups.py", line 567, in new_backup
    odb.get_backup(older_than, ignore_files, force=force)
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/utils/backups.py", line 184, in get_backup
    self.todays_date = now_datetime().strftime("%Y%m%d_%H%M%S")
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/utils/data.py", line 165, in now_datetime
    dt = convert_utc_to_user_timezone(datetime.datetime.utcnow())
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/utils/data.py", line 197, in convert_utc_to_user_timezone
    time_zone = get_time_zone()
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/utils/data.py", line 182, in get_time_zone
    return frappe.cache().get_value("time_zone", _get_time_zone)
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/utils/redis_wrapper.py", line 80, in get_value
    val = generator()
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/utils/data.py", line 176, in _get_time_zone
    return frappe.db.get_system_setting('time_zone') or 'Asia/Kolkata' # Default to India ?!
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/database/database.py", line 940, in get_system_setting
    return frappe.cache().get_value("system_settings", _load_system_settings).get(key)
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/utils/redis_wrapper.py", line 80, in get_value
    val = generator()
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/database/database.py", line 939, in _load_system_settings
    return self.get_singles_dict("System Settings")
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/database/database.py", line 518, in get_singles_dict
    """, doctype)
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/database/database.py", line 138, in sql
    self._cursor.execute(query, values)
  File "/Users/greggy/thanos/frappe/frappe-bench/env/lib/python3.7/site-packages/pymysql/cursors.py", line 148, in execute
    result = self._query(query)
  File "/Users/greggy/thanos/frappe/frappe-bench/env/lib/python3.7/site-packages/pymysql/cursors.py", line 310, in _query
    conn.query(q)
  File "/Users/greggy/thanos/frappe/frappe-bench/env/lib/python3.7/site-packages/pymysql/connections.py", line 548, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/Users/greggy/thanos/frappe/frappe-bench/env/lib/python3.7/site-packages/pymysql/connections.py", line 775, in _read_query_result
    result.read()
  File "/Users/greggy/thanos/frappe/frappe-bench/env/lib/python3.7/site-packages/pymysql/connections.py", line 1156, in read
    first_packet = self.connection._read_packet()
  File "/Users/greggy/thanos/frappe/frappe-bench/env/lib/python3.7/site-packages/pymysql/connections.py", line 725, in _read_packet
    packet.raise_for_error()
  File "/Users/greggy/thanos/frappe/frappe-bench/env/lib/python3.7/site-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/Users/greggy/thanos/frappe/frappe-bench/env/lib/python3.7/site-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.ProgrammingError: (1146, "Table '_ad03fa1a016ca1c4.tabsingles' doesn't exist")

Backup failed for Site library.test. Database or site_config.json may be corrupted
Traceback (most recent call last):
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/commands/site.py", line 441, in backup
    force=True
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/utils/backups.py", line 528, in scheduled_backup
    verbose=verbose,
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/utils/backups.py", line 567, in new_backup
    odb.get_backup(older_than, ignore_files, force=force)
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/utils/backups.py", line 184, in get_backup
    self.todays_date = now_datetime().strftime("%Y%m%d_%H%M%S")
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/utils/data.py", line 165, in now_datetime
    dt = convert_utc_to_user_timezone(datetime.datetime.utcnow())
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/utils/data.py", line 197, in convert_utc_to_user_timezone
    time_zone = get_time_zone()
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/utils/data.py", line 182, in get_time_zone
    return frappe.cache().get_value("time_zone", _get_time_zone)
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/utils/redis_wrapper.py", line 80, in get_value
    val = generator()
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/utils/data.py", line 176, in _get_time_zone
    return frappe.db.get_system_setting('time_zone') or 'Asia/Kolkata' # Default to India ?!
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/database/database.py", line 940, in get_system_setting
    return frappe.cache().get_value("system_settings", _load_system_settings).get(key)
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/utils/redis_wrapper.py", line 80, in get_value
    val = generator()
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/database/database.py", line 939, in _load_system_settings
    return self.get_singles_dict("System Settings")
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/database/database.py", line 518, in get_singles_dict
    """, doctype)
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/database/database.py", line 138, in sql
    self._cursor.execute(query, values)
  File "/Users/greggy/thanos/frappe/frappe-bench/env/lib/python3.7/site-packages/pymysql/cursors.py", line 148, in execute
    result = self._query(query)
  File "/Users/greggy/thanos/frappe/frappe-bench/env/lib/python3.7/site-packages/pymysql/cursors.py", line 310, in _query
    conn.query(q)
  File "/Users/greggy/thanos/frappe/frappe-bench/env/lib/python3.7/site-packages/pymysql/connections.py", line 548, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/Users/greggy/thanos/frappe/frappe-bench/env/lib/python3.7/site-packages/pymysql/connections.py", line 775, in _read_query_result
    result.read()
  File "/Users/greggy/thanos/frappe/frappe-bench/env/lib/python3.7/site-packages/pymysql/connections.py", line 1156, in read
    first_packet = self.connection._read_packet()
  File "/Users/greggy/thanos/frappe/frappe-bench/env/lib/python3.7/site-packages/pymysql/connections.py", line 725, in _read_packet
    packet.raise_for_error()
  File "/Users/greggy/thanos/frappe/frappe-bench/env/lib/python3.7/site-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/Users/greggy/thanos/frappe/frappe-bench/env/lib/python3.7/site-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.ProgrammingError: (1146, "Table '_ad03fa1a016ca1c4.tabsingles' doesn't exist")

Backup failed for Site library.test. Database or site_config.json may be corrupted
Traceback (most recent call last):
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/commands/site.py", line 441, in backup
    force=True
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/utils/backups.py", line 528, in scheduled_backup
    verbose=verbose,
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/utils/backups.py", line 567, in new_backup
    odb.get_backup(older_than, ignore_files, force=force)
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/utils/backups.py", line 195, in get_backup
    self.take_dump()
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/utils/backups.py", line 356, in take_dump
    exc=frappe.ExecutableNotFound
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/__init__.py", line 439, in throw
    msgprint(msg, raise_exception=exc, title=title, indicator='red', is_minimizable=is_minimizable, wide=wide, as_list=as_list)
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/__init__.py", line 418, in msgprint
    _raise_exception()
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/__init__.py", line 372, in _raise_exception
    raise raise_exception(msg)
frappe.exceptions.ExecutableNotFound: mysqldump not found in PATH! This is required to take a backup.

Backup failed for Site library.test. Database or site_config.json may be corrupted
Traceback (most recent call last):
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/commands/site.py", line 441, in backup
    force=True
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/utils/backups.py", line 528, in scheduled_backup
    verbose=verbose,
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/utils/backups.py", line 567, in new_backup
    odb.get_backup(older_than, ignore_files, force=force)
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/utils/backups.py", line 195, in get_backup
    self.take_dump()
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/utils/backups.py", line 356, in take_dump
    exc=frappe.ExecutableNotFound
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/__init__.py", line 439, in throw
    msgprint(msg, raise_exception=exc, title=title, indicator='red', is_minimizable=is_minimizable, wide=wide, as_list=as_list)
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/__init__.py", line 418, in msgprint
    _raise_exception()
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/__init__.py", line 372, in _raise_exception
    raise raise_exception(msg)
frappe.exceptions.ExecutableNotFound: mysqldump not found in PATH! This is required to take a backup.

Backup failed for Site estate.site. Database or site_config.json may be corrupted
Traceback (most recent call last):
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/commands/site.py", line 441, in backup
    force=True
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/utils/backups.py", line 528, in scheduled_backup
    verbose=verbose,
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/utils/backups.py", line 567, in new_backup
    odb.get_backup(older_than, ignore_files, force=force)
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/utils/backups.py", line 195, in get_backup
    self.take_dump()
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/utils/backups.py", line 356, in take_dump
    exc=frappe.ExecutableNotFound
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/__init__.py", line 439, in throw
    msgprint(msg, raise_exception=exc, title=title, indicator='red', is_minimizable=is_minimizable, wide=wide, as_list=as_list)
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/__init__.py", line 418, in msgprint
    _raise_exception()
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/__init__.py", line 372, in _raise_exception
    raise raise_exception(msg)
frappe.exceptions.ExecutableNotFound: mysqldump not found in PATH! This is required to take a backup.

Backup failed for Site library.test. Database or site_config.json may be corrupted
Traceback (most recent call last):
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/commands/site.py", line 441, in backup
    force=True
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/utils/backups.py", line 528, in scheduled_backup
    verbose=verbose,
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/utils/backups.py", line 567, in new_backup
    odb.get_backup(older_than, ignore_files, force=force)
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/utils/backups.py", line 195, in get_backup
    self.take_dump()
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/utils/backups.py", line 356, in take_dump
    exc=frappe.ExecutableNotFound
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/__init__.py", line 439, in throw
    msgprint(msg, raise_exception=exc, title=title, indicator='red', is_minimizable=is_minimizable, wide=wide, as_list=as_list)
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/__init__.py", line 418, in msgprint
    _raise_exception()
  File "/Users/greggy/thanos/frappe/frappe-bench/apps/frappe/frappe/__init__.py", line 372, in _raise_exception
    raise raise_exception(msg)
frappe.exceptions.ExecutableNotFound: mysqldump not found in PATH! This is required to take a backup.

